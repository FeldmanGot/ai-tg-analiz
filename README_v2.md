# AI Bot Manager v2.0 - FastAPI + Ollama + SQLite

–ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ò–ò-–±–æ—Ç–æ–º —Å –ª–æ–∫–∞–ª—å–Ω–æ–π LLM –∏ Telegram –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π.

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
[Telegram API] ‚Üí [FastAPI HTTP-—Å–µ—Ä–≤–µ—Ä] ‚Üí [Ollama LLM] ‚Üí [SQLite DB] ‚Üí [JSON/HTML –æ—Ç–≤–µ—Ç]
```

## üöÄ –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Ollama
```bash
# Windows
install_ollama.bat

# Linux/Mac
curl -fsSL https://ollama.ai/install.sh | sh
ollama pull llama2
```

### 2. –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
```bash
# Windows
start.bat

# Linux/Mac
pip install -r requirements.txt
python main.py
```

## üìã –§—É–Ω–∫—Ü–∏–∏

### ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
- **FastAPI** - –≤—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π HTTP —Å–µ—Ä–≤–µ—Ä
- **Ollama –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** - –ª–æ–∫–∞–ª—å–Ω–∞—è LLM (Llama2, CodeLlama, Mistral)
- **SQLite –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** - —Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ —á–∞—Ç–æ–≤
- **Telegram Bot** - webhook –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
- **–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- **–ê–Ω–∞–ª–∏–∑ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏** - summary, tone, model tracking

### üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
```sql
chat_messages:
- id (Primary Key)
- chat_id (Telegram chat ID)
- username (Telegram username)
- message (–¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è)
- timestamp (–í—Ä–µ–º—è —Å–æ–æ–±—â–µ–Ω–∏—è)
- analyzed (–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ –ª–∏)
- summary (–ö—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ)
- tone (–¢–æ–Ω —Å–æ–æ–±—â–µ–Ω–∏—è)
- model_used (–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω–∞—è –º–æ–¥–µ–ª—å)
```

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –°–∏—Å—Ç–µ–º–∞
- **GPU**: RTX 4060 (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
- **RAM**: 32 –ì–ë –û–ó–£
- **OS**: Windows 10/11, Linux, macOS

### –ü—Ä–æ–≥—Ä–∞–º–º–Ω–æ–µ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ
- **Python 3.9+**
- **Ollama** (–ª–æ–∫–∞–ª—å–Ω–∞—è LLM)
- **SQLite** (–≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è)
- **Telegram Bot Token**

## üåê API Endpoints

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- `GET /api/config` - –ø–æ–ª—É—á–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
- `POST /api/config` - —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- `GET /api/test-ollama` - —Ç–µ—Å—Ç Ollama –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- `GET /api/test-telegram` - —Ç–µ—Å—Ç Telegram –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- `GET /api/test-database` - —Ç–µ—Å—Ç –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –î–∞–Ω–Ω—ã–µ
- `GET /api/chat-history` - –∏—Å—Ç–æ—Ä–∏—è —á–∞—Ç–æ–≤
- `POST /api/analyze` - –∞–Ω–∞–ª–∏–∑ —Å–æ–æ–±—â–µ–Ω–∏—è

### Telegram
- `POST /webhook/telegram` - webhook –¥–ª—è Telegram

## üì± Telegram Bot –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

1. **–°–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞** —á–µ—Ä–µ–∑ @BotFather
2. **–ü–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω** –∏ –¥–æ–±–∞–≤—å—Ç–µ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ webhook**:
   ```
   https://api.telegram.org/bot<YOUR_TOKEN>/setWebhook?url=https://your-domain.com/webhook/telegram
   ```

## üéõÔ∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–æ–¥–µ–ª—è–º–∏

### –î–æ—Å—Ç—É–ø–Ω—ã–µ –º–æ–¥–µ–ª–∏ Ollama
- `llama2` - –±–∞–∑–æ–≤–∞—è –º–æ–¥–µ–ª—å
- `llama2:7b` - 7B –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- `llama2:13b` - 13B –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- `codellama` - –¥–ª—è –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è
- `mistral` - –±—ã—Å—Ç—Ä–∞—è –º–æ–¥–µ–ª—å

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–æ–≤—ã—Ö –º–æ–¥–µ–ª–µ–π
```bash
ollama pull llama2:7b
ollama pull codellama
ollama pull mistral
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- **–°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º** - Ollama, Telegram, Database
- **–ò—Å—Ç–æ—Ä–∏—è —á–∞—Ç–æ–≤** - –ø–æ—Å–ª–µ–¥–Ω–∏–µ 50 —Å–æ–æ–±—â–µ–Ω–∏–π
- **–ê–Ω–∞–ª–∏–∑ —Å–æ–æ–±—â–µ–Ω–∏–π** - summary, tone, –º–æ–¥–µ–ª—å
- **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è** - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

### –õ–æ–≥–∏
- **FastAPI** - HTTP –∑–∞–ø—Ä–æ—Å—ã
- **Ollama** - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–æ–≤
- **Telegram** - webhook —Å–æ–±—ã—Ç–∏—è
- **SQLite** - –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö

## üîÆ –ë—É–¥—É—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏

üîÑ **–†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑** - sentiment, entities, keywords  
üîÑ **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏** - –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É LLM  
üîÑ **–ì—Ä—É–ø–ø–æ–≤—ã–µ —á–∞—Ç—ã** - –∞–Ω–∞–ª–∏–∑ –≥—Ä—É–ø–ø–æ–≤—ã—Ö –ø–µ—Ä–µ–ø–∏—Å–æ–∫  
üîÑ **–≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö** - CSV, JSON, PDF –æ—Ç—á–µ—Ç—ã  
üîÑ **API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** - Swagger/OpenAPI  

## üõ†Ô∏è –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
```
ai-bot-manager/
‚îú‚îÄ‚îÄ main.py              # FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îú‚îÄ‚îÄ requirements.txt     # Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ install_ollama.bat  # –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Ollama
‚îú‚îÄ‚îÄ start.bat           # –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ chat_history.db     # SQLite –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ config.json         # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îî‚îÄ‚îÄ README_v2.md        # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
1. **–ù–æ–≤—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã** - –≤ `main.py`
2. **–ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö** - –≤ Pydantic –∫–ª–∞—Å—Å–∞—Ö
3. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** - –≤ SQLAlchemy –º–æ–¥–µ–ª—è—Ö
4. **–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** - –≤ HTML_TEMPLATE

## üìà –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### RTX 4060 + 32GB RAM
- **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è**: ~10-30 —Ç–æ–∫–µ–Ω–æ–≤/—Å–µ–∫
- **–ê–Ω–∞–ª–∏–∑**: ~1-3 —Å–µ–∫—É–Ω–¥—ã –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ
- **–ü–∞–º—è—Ç—å**: ~8-16GB –¥–ª—è –º–æ–¥–µ–ª–µ–π
- **–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ—Å—Ç—å**: –¥–æ 10 –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
- **–ú–æ–¥–µ–ª—å**: llama2:7b –¥–ª—è —Å–∫–æ—Ä–æ—Å—Ç–∏
- **–ö–æ–Ω—Ç–µ–∫—Å—Ç**: –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–æ 2048 —Ç–æ–∫–µ–Ω–æ–≤
- **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**: —á–∞—Å—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞

## üö® –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### Ollama –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
ollama list

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
ollama serve
```

### Telegram webhook –æ—à–∏–±–∫–∏
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ webhook
curl https://api.telegram.org/bot<TOKEN>/getWebhookInfo
```

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–π–ª–∞
ls -la chat_history.db

# –ü–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏–µ
rm chat_history.db
python main.py
```

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≥–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é! üéâ 